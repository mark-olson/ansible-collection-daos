---
# playbook: daos_local.yml
# description: Installs DAOS on localhost.
#              This playbook was intended to be run by a startup/user_data script.
# run: ansible-playbook daos_local.yml --extra-vars="daos_roles=['admin','server','client']"

- name: Install DAOS
  hosts: "{{ target | default('localhost') }}"
  gather_facts: yes
  become: yes

  collections:
    - daos_stack.daos

  roles:
    - role: epel
      tags:
        - epel
    - role: tune
      tags:
        - tune
        - tune_tuned
        - tune_network
        - tune_iommu
    - role: reboot
      tags:
        - reboot
    - role: daos
      tags:
        - daos
        - daos_install
        - daos_configure
